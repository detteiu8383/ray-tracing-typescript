var j=Object.defineProperty;var z=(r,t,e)=>t in r?j(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var F=(r,t,e)=>(z(r,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();class n{constructor(t,e,o){F(this,"e",[0,0,0]);this.e[0]=t,this.e[1]=e,this.e[2]=o}static add(t,e){return new n(t.e[0]+e.e[0],t.e[1]+e.e[1],t.e[2]+e.e[2])}static sub(t,e){return new n(t.e[0]-e.e[0],t.e[1]-e.e[1],t.e[2]-e.e[2])}static scale(t,e){return new n(t.e[0]*e,t.e[1]*e,t.e[2]*e)}static mul(t,e){return new n(t.e[0]*e.e[0],t.e[1]*e.e[1],t.e[2]*e.e[2])}static div(t,e){return new n(t.e[0]/e,t.e[1]/e,t.e[2]/e)}static mag(t){return Math.sqrt(n.lengthSquared(t))}static lengthSquared(t){return t.e[0]*t.e[0]+t.e[1]*t.e[1]+t.e[2]*t.e[2]}static dot(t,e){return t.e[0]*e.e[0]+t.e[1]*e.e[1]+t.e[2]*e.e[2]}static cross(t,e){return new n(t.e[1]*e.e[2]-t.e[2]*e.e[1],t.e[2]*e.e[0]-t.e[0]*e.e[2],t.e[0]*e.e[1]-t.e[1]*e.e[0])}static normalize(t){const e=n.mag(t);return e===0?new n(0,0,0):n.div(t,e)}}class a extends n{constructor(t,e,o){super(t,e,o)}static legalize(t){return new a(Math.min(Math.max(t.e[0],0),1),Math.min(Math.max(t.e[1],0),1),Math.min(Math.max(t.e[2],0),1))}static writeColor(t,e,o){const s=a.scale(a.legalize(t),255);o[e]=s.e[0],o[e+1]=s.e[1],o[e+2]=s.e[2],o[e+3]=255}}class D{constructor(t){F(this,"objects",[]);t&&(this.objects=t)}hit(t,e,o){let s=o,i=null;for(const c of this.objects){const u=c.hit(t,e,s);u&&(s=u.t,i=u)}return i}add(t){this.objects.push(t)}clear(){this.objects=[]}}class H{constructor(t,e){this.origin=t,this.direction=e}at(t){return n.add(this.origin,n.scale(this.direction,t))}}class x{constructor(t,e,o,s){this.point=t,this.normal=e,this.t=o,this.frontFace=s}setFaceNormal(t,e){this.frontFace=n.dot(t.direction,e)<0,this.normal=this.frontFace?e:n.scale(e,-1)}}class y{constructor(t,e){this.center=t,this.radius=e}hit(t,e,o){const s=n.sub(t.origin,this.center),i=n.lengthSquared(t.direction),c=n.dot(s,t.direction),u=n.lengthSquared(s)-this.radius*this.radius,g=c*c-i*u;if(g>0){const w=Math.sqrt(g),h=(-c-w)/i;if(h<o&&h>e){const m=t.at(h),l=n.div(n.sub(m,this.center),this.radius),d=new x(m,l,h,n.dot(t.direction,l)<0);return d.setFaceNormal(t,l),d}const f=(-c+w)/i;if(f<o&&f>e){const m=t.at(f),l=n.div(n.sub(m,this.center),this.radius),d=new x(m,l,f,n.dot(t.direction,l)<0);return d.setFaceNormal(t,l),d}}return null}}const I=(r,t)=>{const e=t.hit(r,0,1/0);if(e)return a.scale(a.add(e.normal,new a(1,1,1)),.5);const o=n.normalize(r.direction),s=.5*(o.e[1]+1);return a.add(a.scale(new a(1,1,1),1-s),a.scale(new a(.5,.7,1),s))},O=()=>{const r=1.7777777777777777,t=400,e=Math.floor(t/r),o=4,s=new Uint8Array(t*e*o),i=new D;i.add(new y(new n(0,0,-1),.5)),i.add(new y(new n(0,-100.5,-1),100));const c=2,u=r*c,g=1,w=new n(0,0,0),h=new n(u,0,0),f=new n(0,c,0),m=n.sub(n.sub(n.sub(w,n.div(h,2)),n.div(f,2)),new n(0,0,g));for(let p=e-1;p>=0;p--)for(let b=0;b<t;b++){const R=b/(t-1),q=p/(e-1),S=((e-p)*t+b)*o,C=new H(w,n.sub(n.add(n.add(m,n.scale(h,R)),n.scale(f,q)),w)),N=I(C,i);a.writeColor(N,S,s)}const l=document.getElementById("canvas");l.width=t,l.height=e;const d=l.getContext("2d");if(d===null)throw new Error("Failed to get context");const L=new Uint8ClampedArray(s),M=new ImageData(L,t,e);d.putImageData(M,0,0)};O();
